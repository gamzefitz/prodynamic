{% extends "base.html" %} {% block content %}

<h2>{{ table_name }} - {% if row %}Edit{% else %}Add{% endif %}</h2>

<form method="post">
  {% for c in cols %}
  <label>{{ c }}</label>
  {% set t = types.get(c, "text") %} {% if t == "bool" %} {% set current =
  (row[c] if row else "False") %}
  <select name="{{ c }}">
    <option
      value="False"
      {%
      if
      current
      in
      ["False", 0, "0"]
      %}selected{%
      endif
      %}
    >
      False
    </option>
    <option
      value="True"
      {%
      if
      current
      in
      ["True", 1, "1"]
      %}selected{%
      endif
      %}
    >
      True
    </option>
  </select>

  {% elif t == "date" %}
  <input
    type="date"
    name="{{ c }}"
    value="{{ (row[c][:10] if row and row[c] else '') }}"
  />

  {% elif t == "int" %}
  <input type="number" name="{{ c }}" value="{{ row[c] if row else '' }}" />

  {% elif t == "float" %}
  <input
    type="number"
    step="0.1"
    name="{{ c }}"
    value="{{ row[c] if row else '' }}"
  />

  {% else %}
  <input name="{{ c }}" value="{{ row[c] if row else '' }}" />
  {% endif %} {% endfor %}

  <button class="btn" type="submit">Save</button>
  <a class="btn" href="{{ url_for('crud_list', table_name=table_name) }}"
    >Cancel</a
  >
</form>

{% endblock %}
